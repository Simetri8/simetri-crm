# Kibo UI Calendar ile Takvim EkranÄ± OluÅŸturma

Mevcut CRM ve operasyon verilerini (takipler, aktiviteler, deadline'lar) aylÄ±k takvim gÃ¶rÃ¼nÃ¼mÃ¼nde gÃ¶rselleÅŸtiren bir ekran oluÅŸturulacak. Kibo UI'Ä±n [components/kibo-ui/calendar](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/components/kibo-ui/calendar) bileÅŸeni temel alÄ±nacak.

## Takvimde GÃ¶sterilecek Veriler

Takvimde 5 farklÄ± kaynaktan gelen olaylar renk kodlarÄ± ile gÃ¶sterilecek:

| Kaynak | Tarih AlanÄ± | Renk | AÃ§Ä±klama |
|--------|-------------|------|----------|
| **Contacts** | `nextActionDate` | ğŸŸ¢ YeÅŸil | KiÅŸi takipleri |
| **Deals** | `nextActionDate` | ğŸ”µ Mavi | FÄ±rsat takipleri |
| **Companies** | `nextActionDate` | ğŸŸ£ Mor | Åirket takipleri |
| **Work Orders** | `targetDeliveryDate` | ğŸŸ  Turuncu | Ä°ÅŸ emri teslim tarihi |
| **Requests** | `dueDate` | ğŸ”´ KÄ±rmÄ±zÄ± | Talep son tarihi |

## Proposed Changes

### Veri KatmanÄ±

#### [NEW] [calendar.ts](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/lib/firebase/calendar.ts)

Takvim iÃ§in veri Ã§ekme servisi. Ay bazlÄ± tarih aralÄ±ÄŸÄ±na gÃ¶re tÃ¼m kaynaklardan etkinlikleri toplayacak:

```typescript
export type CalendarEventSource = 'contact' | 'deal' | 'company' | 'work-order' | 'request';

export type CalendarEvent = {
  id: string;
  title: string;
  date: Date;
  source: CalendarEventSource;
  sourceId: string;    // ilgili kaydÄ±n ID'si
  color: string;
  subtitle?: string;   // ek bilgi (ÅŸirket adÄ±, deal adÄ± vs.)
};

export const calendarService = {
  getEventsForMonth(year: number, month: number): Promise<CalendarEvent[]> {
    // 5 kaynaktan paralel sorgular
    // SonuÃ§larÄ± birleÅŸtirip CalendarEvent[] dÃ¶ndÃ¼rÃ¼r
  }
};
```

---

### Hook KatmanÄ±

#### [NEW] [use-calendar-events.ts](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/hooks/use-calendar-events.ts)

Ay deÄŸiÅŸikliklerini izleyerek veri Ã§ekilmesini yÃ¶neten React hook'u:

```typescript
export function useCalendarEvents(year: number, month: number) {
  // calendarService.getEventsForMonth ile veri Ã§ekme
  // loading, error, events state'leri
  // CalendarEvent[] â†’ Feature[] dÃ¶nÃ¼ÅŸÃ¼mÃ¼ (Kibo Calendar'Ä±n beklediÄŸi format)
}
```

---

### Sayfa KatmanÄ±

#### [NEW] [page.tsx](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/app/(auth)/calendar/page.tsx)

Takvim sayfasÄ±. Kibo UI Calendar bileÅŸenlerini compose ederek:

- [CalendarProvider](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/components/kibo-ui/calendar/index.tsx#487-497) (locale="tr-TR", startDay=1 â€” Pazartesi'den baÅŸlasÄ±n)
- [CalendarDate](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/components/kibo-ui/calendar/index.tsx#432-435) â†’ ay/yÄ±l seÃ§ici + ileri/geri navigasyon
- [CalendarHeader](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/components/kibo-ui/calendar/index.tsx#440-458) â†’ gÃ¼n baÅŸlÄ±klarÄ± (Pzt, Sal, Ã‡ar...)
- [CalendarBody](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/components/kibo-ui/calendar/index.tsx#194-309) â†’ gÃ¼n hÃ¼creleri + etkinlik render
- [CalendarItem](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/components/kibo-ui/calendar/index.tsx#459-463) â†’ her etkinliÄŸin gÃ¶sterimi (renk + baÅŸlÄ±k)
- Kaynak filtresi (checkbox'lar ile hangi kaynak gÃ¶rÃ¼nsÃ¼n)
- EtkinliÄŸe tÄ±klayÄ±nca ilgili kaydÄ±n detay sayfasÄ±na yÃ¶nlendirme

---

### Navigasyon GÃ¼ncellemesi

#### [MODIFY] [app-sidebar.tsx](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/components/layout/app-sidebar.tsx)

`mainItems` dizisine "Takvim" menÃ¼ Ã¶ÄŸesi eklenecek:

```diff
 const mainItems = [
     ...
+    {
+        title: "Takvim",
+        url: "/calendar",
+        icon: CalendarDays,
+    },
 ]
```

---

## User Review Required

> [!IMPORTANT]
> **Takvimde hangi verilerin gÃ¶sterilmesi isteniyor?**
> YukarÄ±da Ã¶nerilen 5 kaynak (Contact/Deal/Company takipleri, Ä°ÅŸ emri deadline'Ä±, Talep son tarihi) yeterli mi, yoksa baÅŸka kaynaklar da eklenmeli mi? Ã–rneÄŸin:
> - Aktiviteler (geÃ§miÅŸ arama/toplantÄ± kayÄ±tlarÄ±)
> - Teklif tarihleri (gÃ¶nderim/kabul)
> - Deliverable hedef tarihleri

> [!NOTE]
> **Locale ve Hafta BaÅŸlangÄ±cÄ±**: Takvim `tr-TR` locale ile Pazartesi'den baÅŸlayacak ÅŸekilde ayarlanacak.

## Verification Plan

### Build DoÄŸrulamasÄ±
- `npm run build` komutu ile build hatasÄ± olmadÄ±ÄŸÄ± doÄŸrulanacak

### TarayÄ±cÄ± DoÄŸrulamasÄ±
- GeliÅŸtirme sunucusunda [/calendar](file:///Users/mehmac/Documents/Simetri8/Develop/simetri-planner/components/kibo-ui/calendar) sayfasÄ±na gidilerek:
  1. Takvimin doÄŸru render edildiÄŸi
  2. Ay/yÄ±l seÃ§icisinin Ã§alÄ±ÅŸtÄ±ÄŸÄ±
  3. Ä°leri/geri navigasyonun Ã§alÄ±ÅŸtÄ±ÄŸÄ±
  4. Etkinliklerin gÃ¼nlere doÄŸru yerleÅŸtiÄŸi
  5. Sidebar'da "Takvim" linkinin gÃ¶rÃ¼ndÃ¼ÄŸÃ¼
  kontrol edilecek
